<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>To-do list</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css" />
    <link href="../assets/vendor/fonts/circular-std/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/libs/css/style.css" />
    <link rel="stylesheet" href="../assets/vendor/fonts/fontawesome/css/fontawesome-all.css" />

    <!-- favicon -->
    <link href="../assets/images/favicon (3).ico" rel="icon" class="favIcon" />
    <style>
      .popup-form {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        z-index: 9999;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }
      .close-button {
        position: absolute;
        top: 1px;
        right: 10px;
        cursor: pointer;
        font-size: 20px;
        color: #555;
      }

      .close-button:hover {
        color: #000;
      }
    </style>
  </head>

  <body>
    <!-- ============================================================== -->
    <!-- main wrapper -->
    <!-- ============================================================== -->
    <div class="dashboard-main-wrapper">
      <!-- ============================================================== -->
      <!-- navbar -->
      <!-- ============================================================== -->
      <div class="dashboard-header">
        <nav class="navbar navbar-expand-lg bg-white fixed-top">
          <a style="color: black" class="navbar-brand" href="../index.html"><img src="../assets/images/logo.png" style="width: 50px; height: 50px" /><span>H.A.W.K Admin</span></a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto navbar-right-top">
              <li class="nav-item">
              </li>
              

              <li class="nav-item dropdown nav-user">
                <a class="nav-link nav-user-img" href="#" id="navbarDropdownMenuLink2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                  ><img src="../assets/images/user(3).png" alt="" class="user-avatar-md rounded-circle"
                /></a>
                <div class="dropdown-menu dropdown-menu-right nav-user-dropdown" aria-labelledby="navbarDropdownMenuLink2">
                  <div class="nav-user-info" style="background-image: linear-gradient(to right, #000000, #1a1a1a)">
                    <h5 class="mb-0 text-white nav-user-name" id="StaffName">Winnie</h5>
                    <span class="status"></span><span class="ml-2" id="StaffRole">Owner</span>
                  </div>
                  <a class="dropdown-item" href="../my-profile.html"><i class="fas fa-user mr-2"></i>My profile</a>
                  <a class="dropdown-item" href="../pages/login.html"><i class="fas fa-power-off mr-2"></i>Logout</a>
                </div>
              </li>
            </ul>
          </div>
        </nav>
      </div>
      <!-- ============================================================== -->
      <!-- end navbar -->
      <!-- ============================================================== -->
      <!-- ============================================================== -->
      <!-- left sidebar -->
      <!-- ============================================================== -->
      <div class="nav-left-sidebar sidebar-dark">
        <div class="menu-list">
          <nav class="navbar navbar-expand-lg navbar-light">
            <a class="d-xl-none d-lg-none" href="../index.html">Dashboard</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav flex-column">
                <li class="nav-divider">Menu</li>
                <li class="nav-item">
                  <a class="nav-link" href="../index.html" data-target="#submenu-1" aria-controls="submenu-1"><i class="fa fa-fw fa-user-circle" href="index.html"></i>Dashboard <span class="badge badge-success">6</span></a>
                  <div id="submenu-1" class="collapse submenu">
                    <ul class="nav flex-column">
                      <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-1-2" aria-controls="submenu-1-2">E-Commerce</a>
                        <div id="submenu-1-2" class="collapse submenu">
                          <ul class="nav flex-column">
                            <li class="nav-item">
                              <a class="nav-link">H.A.W.K Dashboard</a>
                            </li>
                          </ul>
                        </div>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-2" aria-controls="submenu-2"><i class="fa fa-fw fa-table"></i>Table</a>
                  <div id="submenu-2" class="collapse submenu">
                    <ul class="nav flex-column">
                      <li class="nav-item">
                        <a class="nav-link" href="../categoryTable.html">Category <span class="badge badge-secondary">New</span></a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../shipperTable.html">Shipper</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../staffTable.html">Staff</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../productTable.html">Product</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../orderTable.html">Order</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../orderDetailTable.html">Order Details</a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-3" aria-controls="submenu-3"><i class="fas fa-fw fa-archive"></i>Inventory</a>
                  <div id="submenu-3" class="collapse submenu">
                    <ul class="nav flex-column">
                      <li class="nav-item">
                        <a class="nav-link" href="../Restock.html">Input Stock</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../pages/availability.html">Availability</a>
                      </li>
                    </ul>
                  </div>
                </li>

                <li class="nav-item active">
                  <a class="nav-link active" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-4" aria-controls="submenu-4"><i class="fas fa-fw fa-calendar-alt"></i>Schedule</a>
                  <div id="submenu-4" class="collapse submenu">
                    <ul class="nav flex-column">
                      <li class="nav-item">
                        <a class="nav-link" href="sortable-nestable-lists.html">To-do List</a>
                      </li>
                    </ul>
                  </div>
                </li>

                <li class="nav-divider">Others</li>
                <li class="nav-item">
                  <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-6" aria-controls="submenu-6"><i class="fas fa-comments"></i>Social Media </a>
                  <div id="submenu-6" class="collapse submenu">
                    <ul class="nav flex-column">
                      <li class="nav-item">
                        <a class="nav-link" href="../pages/404-page.html">Instagram</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../pages/404-page.html">Facebook</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../pages/404-page.html">Linkedin</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="../pages/404-page.html">Whatsapp Group</a>
                      </li>
                    </ul>
                  </div>
                </li>

                <li class="nav-item">
                  <a class="nav-link" href="../my-profile.html" aria-expanded="false" data-target="#submenu-8" aria-controls="submenu-8"><i class="fas fa-fw fa-user"></i>My Profile</a>
                </li>
                <!-- <li class="nav-item">
                  <a class="nav-liqnk" href="../pages/login.html" aria-expanded="false" data-target="#submenu-10" aria-controls="submenu-10"><i class="fas fa-fw fa-sign-out-alt"></i>Logout</a>
                </li> -->
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <!-- ============================================================== -->
      <!-- end left sidebar -->
      <!-- ============================================================== -->
      <!-- ============================================================== -->
      <!-- wrapper  -->
      <!-- ============================================================== -->
      <div class="dashboard-wrapper">
        <div class="container-fluid dashboard-content">
          <!-- ============================================================== -->
          <!-- pageheader -->
          <!-- ============================================================== -->
          <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="page-header">
                <h2 class="pageheader-title">TO-DO LIST</h2>
                <div class="page-breadcrumb">
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="#" class="breadcrumb-link">Schedule</a></li>
                      <li class="breadcrumb-item active" aria-current="page">To-do List</li>
                    </ol>
                  </nav>
                </div>
              </div>
            </div>
          </div>
          <!-- ============================================================== -->
          <!-- end pageheader -->
          <!-- ============================================================== -->
          <div class="dashboard-short-list">
            <div class="row">
              <!-- ============================================================== -->
              <!-- shortable list  -->
              <!-- ============================================================== -->
              <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 co-12">
                <section class="card card-fluid">
                  <h5 class="card-header drag-handle">
                    To-do
                    <button id="addButton" class="btn btn-sm btn-purple" style="float: right; margin-top: -2px"><i class="fas fa-plus" style="border-color: #5969ff"></i></button>
                  </h5>
                  <div id="addTodo" class="popup-form">
                    <div class="form-content">
                      <span id="closeButton" class="close-button">&times;</span>
                      <form id="addTaskForm">
                        <!-- Add form fields here -->
                        <input type="text" name="task" placeholder="Task" required />
                        <input type="submit" value="Add Task" />
                      </form>
                    </div>
                  </div>
                  <ul class="sortable-lists list-group list-group-flush list-group-bordered" id="items">
                   
                  </ul>
                </section>
              </div>
              <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 co-12">
                <div class="text-center pt-66" style="margin-top: 95px; width: 400px; height: 400px">
                  <img src="../assets/images/logo.png" />
                </div>
              </div>
            </div>
            <!-- ============================================================== -->
            <!-- end shortable list  -->
            <!-- ============================================================== -->
          </div>
        </div>
        <!-- ============================================================== -->
        <!-- footer -->
        <!-- ============================================================== -->
        <div class="footer">
          <div class="container-fluid">
            <div class="row">
              <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">Copyright Â© 2018 Concept. All rights reserved. Dashboard by <a href="https://colorlib.com/wp/">Colorlib</a>.</div>
              <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                <div class="text-md-right footer-links d-none d-sm-block">
                  <a href="javascript: void(0);">About</a>
                  <a href="javascript: void(0);">Support</a>
                  <a href="javascript: void(0);">Contact Us</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- ============================================================== -->
        <!-- end footer -->
        <!-- ============================================================== -->
      </div>
    </div>
    <!-- ============================================================== -->
    <!-- end main wrapper -->
    <!-- ============================================================== -->
    <!-- Optional JavaScript -->
    <script src="../assets/vendor/jquery/jquery-3.3.1.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <script src="../assets/vendor/slimscroll/jquery.slimscroll.js"></script>
    <script src="../assets/libs/js/main-js.js"></script>
    <script src="../assets/vendor/shortable-nestable/Sortable.min.js"></script>
    <script src="../assets/vendor/shortable-nestable/sort-nest.js"></script>
    <script src="../assets/vendor/shortable-nestable/jquery.nestable.js"></script>
    <script>
const addButton = document.getElementById("addButton");
const popupForm = document.getElementById("addTodo");
const formContent = document.querySelector(".form-content");
const taskInput = document.querySelector('input[name="task"]');
const itemList = document.getElementById("items");

var toDoURL = "toDo.php";

function loadData(url, query, targetElement) {
  $.ajax({
    url: url,
    method: "POST",
    data: { query: query },
    success: function(response) {
      $(targetElement).html(response);
    },
  });
}

var toDoListQ = "SELECT * FROM todoList;";
loadData(toDoURL, toDoListQ, "#items");

// Add task form submission
$("#addTaskForm").submit(function(event) {
  event.preventDefault(); // Prevent the form from submitting

  var taskName = $("input[name='task']").val();

  $.ajax({
    url: toDoURL,
    method: "POST",
    data: { query: "INSERT INTO todoList (toDoName) VALUES ('" + taskName + "');" },
    success: function(response) {
      // Reload the task list after adding the new task
      loadData(toDoURL, toDoListQ, "#items");
    },
  });

  // Reset the form
  $(this).trigger("reset");
});

// Delete task button click
$("#items").on("click", ".delete-task", function() {
  var taskId = $(this).data("task-id");

  $.ajax({
    url: toDoURL,
    method: "POST",
    data: { query: "DELETE FROM todoList WHERE toDoID = " + taskId + ";" },
    success: function(response) {
      // Reload the task list after deleting the task
      loadData(toDoURL, toDoListQ, "#items");
    },
  });
});



addButton.addEventListener("click", function () {
  popupForm.style.display = "flex";
});

const closeButton = document.getElementById("closeButton");

closeButton.addEventListener("click", function () {
  popupForm.style.display = "none";
});

formContent.addEventListener("submit", function (event) {
  event.preventDefault();

  const task = taskInput.value;

  const listItem = document.createElement("li");
  listItem.classList.add("list-group-item", "align-items-center", "drag-handle");
  listItem.innerHTML = `
    <span class="drag-indicator"></span>
    <div>${task}</div>
    <div class="btn-group ml-auto">
      <button class="btn btn-sm btn-outline-light"><i class="fas fa-pencil-alt"></i></button>
      <button class="btn btn-sm btn-outline-light check-button">
        <i class="fas fa-check"></i>
      </button>
    </div>
  `;

  // Add event listener to the check button in the new list item
  const checkButton = listItem.querySelector(".check-button");
  checkButton.addEventListener("click", function () {
    listItem.remove();
  });

  itemList.appendChild(listItem);

  taskInput.value = "";

  popupForm.style.display = "none";
});

// Add event listeners to existing and new check buttons
function addCheckButtonListeners() {
  const checkButtons = document.querySelectorAll(".check-button");
  checkButtons.forEach(function (button) {
    button.addEventListener("click", function () {
      const listItem = button.closest("li");
      listItem.remove();
    });
  });
}

// Call the function initially
addCheckButtonListeners();

    </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Fetch user data from the server
      fetch('../my-profile.php')
        .then(response => response.json())
        .then(userData => {
          // Update HTML elements with user data
        
          document.getElementById('StaffName').textContent = userData.staff_name;
          document.getElementById('StaffRole').textContent = userData.staff_role;
        })
        .catch(error => console.error(error));
    });
  </script>    
  </body>
</html>
